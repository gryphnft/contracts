# GRY.PH NFT Smart Contracts

The contract defined here are to allow auditors to evaluate the contracts that
are designed and specifically for the purpose of the GRY.PH project. It
specifies the process of digitizing collectable designs. Some of the business
requirements include the following.

 - Ability to cheaply define a set of tokens that can be minted for each design which include the following.
   - Design information
   - Token quantity limits
   - Royalty Fees
 - Ability to mint tokens cheaply or,
   - Ability to facilitate air drops off chain and,
   - Ability for buyers to redeem air drops and pay the minting costs.
 - Ability for holders to list tokens in a decentralized manner and,
   - Ability for buyers to purchase listed tokens on any NFT marketplace while having,
   - Ability to distribute royalties no matter where it was exchanged

# Considerations

 - Use ERC1155 instead of ERC721
 - Use Enjin or Polygon instead of Ethereum
 - Rarible Compatibility

#### Compatibility

Solidity ^0.8.0

 - Recommended v0.8.4

## 1. Install

```bash
$ cp .env.sample to .env
$ npm install
```

You will need to provide an [Ethereum Private Key](https://www.myetherwallet.com/wallet/create/software?type=overview)
to deploy to a test net and a [Coin Market Cap Key](https://coinmarketcap.com/api/pricing/)
to see gas price conversions when testing.

## 2. Testing

Make sure in `hardhat.config.js` to set the `defaultNetwork` to `hardhat`.

```bash
npm test
```

## 3. Documentation

 - [ERC721](./contracts/token/ERC721/README.md)
 - [ERC1155](./contracts/token/ERC1155/README.md)

> WARNING: The contracts provided here are as is and GRY.PH does not warrant that these will work on a live environment. It is possible that these contracts are out dated and it is possible for GRY.PH to update these contracts without notification. Use at your own risk.

## 4. Reports

The following is an example gas report from the tests ran in this project and could change based on the cost of Ethereum itself.

<pre>
·-----------------------------------------------------|---------------------------|-------------|-----------------------------·
|                 Solc version: 0.8.4                 ·  Optimizer enabled: true  ·  Runs: 200  ·  Block limit: 12450000 gas  │
······················································|···························|·············|······························
|  Methods                                            ·              200 gwei/gas               ·       2585.18 usd/eth       │
·································|····················|·············|·············|·············|···············|··············
|  Contract                      ·  Method            ·  Min        ·  Max        ·  Avg        ·  # calls      ·  usd (avg)  │
·································|····················|·············|·············|·············|···············|··············
|  ERC1155AirDrop                ·  delist            ·          -  ·          -  ·      17803  ·            1  ·       9.20  │
·································|····················|·············|·············|·············|···············|··············
|  ERC1155AirDrop                ·  drop              ·          -  ·          -  ·      46481  ·            8  ·      24.03  │
·································|····················|·············|·············|·············|···············|··············
|  ERC1155AirDrop                ·  exchange          ·      31511  ·     105425  ·      65192  ·            3  ·      33.71  │
·································|····················|·············|·············|·············|···············|··············
|  ERC1155AirDrop                ·  list              ·      71047  ·      71083  ·      71071  ·            3  ·      36.75  │
·································|····················|·············|·············|·············|···············|··············
|  ERC1155AirDrop                ·  redeem            ·      55047  ·      55069  ·      55058  ·           16  ·      28.47  │
·································|····················|·············|·············|·············|···············|··············
|  ERC1155AirDrop                ·  removeFee         ·          -  ·          -  ·      27277  ·            1  ·      14.10  │
·································|····················|·············|·············|·············|···············|··············
|  ERC1155AirDrop                ·  setFee            ·      35758  ·     113729  ·      83628  ·            6  ·      43.24  │
·································|····················|·············|·············|·············|···············|··············
|  ERC1155Exchange               ·  delist            ·          -  ·          -  ·      17814  ·            1  ·       9.21  │
·································|····················|·············|·············|·············|···············|··············
|  ERC1155Exchange               ·  exchange          ·      33044  ·     105447  ·      71417  ·            3  ·      36.93  │
·································|····················|·············|·············|·············|···············|··············
|  ERC1155Exchange               ·  list              ·      71047  ·      71083  ·      71071  ·            3  ·      36.75  │
·································|····················|·············|·············|·············|···············|··············
|  ERC1155Exchange               ·  mint              ·      48570  ·      51070  ·      50445  ·            4  ·      26.08  │
·································|····················|·············|·············|·············|···············|··············
|  ERC1155Exchange               ·  mintBatch         ·          -  ·          -  ·     265146  ·            1  ·     137.09  │
·································|····················|·············|·············|·············|···············|··············
|  ERC1155Exchange               ·  removeFee         ·          -  ·          -  ·      27277  ·            1  ·      14.10  │
·································|····················|·············|·············|·············|···············|··············
|  ERC1155Exchange               ·  safeTransferFrom  ·          -  ·          -  ·      56803  ·            2  ·      29.37  │
·································|····················|·············|·············|·············|···············|··············
|  ERC1155Exchange               ·  setFee            ·      35780  ·     113751  ·      83648  ·            6  ·      43.25  │
·································|····················|·············|·············|·············|···············|··············
|  ERC1155PresetAirDrop          ·  drop              ·          -  ·          -  ·      46436  ·            2  ·      24.01  │
·································|····················|·············|·············|·············|···············|··············
|  ERC1155PresetAirDrop          ·  redeem            ·      54942  ·      54964  ·      54953  ·            4  ·      28.41  │
·································|····················|·············|·············|·············|···············|··············
|  ERC1155PresetExchangable      ·  exchange          ·      29193  ·      71102  ·      50148  ·            2  ·      25.93  │
·································|····················|·············|·············|·············|···············|··············
|  ERC1155PresetExchangable      ·  list              ·          -  ·          -  ·      71016  ·            1  ·      36.72  │
·································|····················|·············|·············|·············|···············|··············
|  ERC1155PresetExchangable      ·  mint              ·          -  ·          -  ·      51010  ·            1  ·      26.37  │
·································|····················|·············|·············|·············|···············|··············
|  ERC1155PresetExchangableFees  ·  exchange          ·          -  ·          -  ·     105447  ·            1  ·      54.52  │
·································|····················|·············|·············|·············|···············|··············
|  ERC1155PresetExchangableFees  ·  list              ·          -  ·          -  ·      71083  ·            1  ·      36.75  │
·································|····················|·············|·············|·············|···············|··············
|  ERC1155PresetExchangableFees  ·  mint              ·          -  ·          -  ·      51070  ·            1  ·      26.41  │
·································|····················|·············|·············|·············|···············|··············
|  ERC1155PresetExchangableFees  ·  setFee            ·      79539  ·     113751  ·      96645  ·            2  ·      49.97  │
·································|····················|·············|·············|·············|···············|··············
|  ERC1155PresetListable         ·  delist            ·          -  ·          -  ·      17803  ·            1  ·       9.20  │
·································|····················|·············|·············|·············|···············|··············
|  ERC1155PresetListable         ·  list              ·          -  ·          -  ·      71024  ·            1  ·      36.72  │
·································|····················|·············|·············|·············|···············|··············
|  ERC1155PresetListable         ·  mint              ·          -  ·          -  ·      51010  ·            1  ·      26.37  │
·································|····················|·············|·············|·············|···············|··············
|  ERC1155PresetTransferFees     ·  removeFee         ·          -  ·          -  ·      27266  ·            1  ·      14.10  │
·································|····················|·············|·············|·············|···············|··············
|  ERC1155PresetTransferFees     ·  setFee            ·      35736  ·     113695  ·      77105  ·            4  ·      39.87  │
·································|····················|·············|·············|·············|···············|··············
|  ERC1155PresetVanilla          ·  mint              ·          -  ·          -  ·      48487  ·            1  ·      25.07  │
·································|····················|·············|·············|·············|···············|··············
|  ERC1155PresetVanilla          ·  mintBatch         ·          -  ·          -  ·     265196  ·            1  ·     137.12  │
·································|····················|·············|·············|·············|···············|··············
|  ERC1155PresetVanilla          ·  safeTransferFrom  ·          -  ·          -  ·      56837  ·            2  ·      29.39  │
·································|····················|·············|·············|·············|···············|··············
|  ERC721AirDrop                 ·  burn              ·          -  ·          -  ·      19565  ·            1  ·      10.12  │
·································|····················|·············|·············|·············|···············|··············
|  ERC721AirDrop                 ·  delist            ·          -  ·          -  ·      15427  ·            1  ·       7.98  │
·································|····················|·············|·············|·············|···············|··············
|  ERC721AirDrop                 ·  exchange          ·      51994  ·      81146  ·      66570  ·            2  ·      34.42  │
·································|····················|·············|·············|·············|···············|··············
|  ERC721AirDrop                 ·  list              ·      48018  ·      48054  ·      48042  ·            3  ·      24.84  │
·································|····················|·············|·············|·············|···············|··············
|  ERC721AirDrop                 ·  redeem            ·          -  ·          -  ·      72361  ·            5  ·      37.41  │
·································|····················|·············|·············|·············|···············|··············
|  ERC721AirDrop                 ·  removeFee         ·          -  ·          -  ·      26731  ·            1  ·      13.82  │
·································|····················|·············|·············|·············|···············|··············
|  ERC721AirDrop                 ·  setFee            ·      35202  ·     113194  ·      83087  ·            6  ·      42.96  │
·································|····················|·············|·············|·············|···············|··············
|  ERC721Exchange                ·  burn              ·          -  ·          -  ·      19565  ·            1  ·      10.12  │
·································|····················|·············|·············|·············|···············|··············
|  ERC721Exchange                ·  delist            ·          -  ·          -  ·      15383  ·            1  ·       7.95  │
·································|····················|·············|·············|·············|···············|··············
|  ERC721Exchange                ·  exchange          ·      51972  ·      81124  ·      66548  ·            2  ·      34.41  │
·································|····················|·············|·············|·············|···············|··············
|  ERC721Exchange                ·  list              ·      48018  ·      48054  ·      48042  ·            3  ·      24.84  │
·································|····················|·············|·············|·············|···············|··············
|  ERC721Exchange                ·  mint              ·      76068  ·      93180  ·      90735  ·            7  ·      46.91  │
·································|····················|·············|·············|·············|···············|··············
|  ERC721Exchange                ·  removeFee         ·          -  ·          -  ·      26742  ·            1  ·      13.83  │
·································|····················|·············|·············|·············|···············|··············
|  ERC721Exchange                ·  setFee            ·      35202  ·     113194  ·      83087  ·            6  ·      42.96  │
·································|····················|·············|·············|·············|···············|··············
|  ERC721PreMint                 ·  burn              ·          -  ·          -  ·      19553  ·            1  ·      10.11  │
·································|····················|·············|·············|·············|···············|··············
|  ERC721PreMint                 ·  delist            ·          -  ·          -  ·      15427  ·            1  ·       7.98  │
·································|····················|·············|·············|·············|···············|··············
|  ERC721PreMint                 ·  exchange          ·      52016  ·      81168  ·      66592  ·            2  ·      34.43  │
·································|····················|·············|·············|·············|···············|··············
|  ERC721PreMint                 ·  list              ·      48062  ·      48098  ·      48086  ·            3  ·      24.86  │
·································|····················|·············|·············|·············|···············|··············
|  ERC721PreMint                 ·  removeFee         ·          -  ·          -  ·      26731  ·            1  ·      13.82  │
·································|····················|·············|·············|·············|···············|··············
|  ERC721PreMint                 ·  setFee            ·      35179  ·     113171  ·      83064  ·            6  ·      42.95  │
·································|····················|·············|·············|·············|···············|··············
|  ERC721PresetAirDrop           ·  redeem            ·      73259  ·      73293  ·      73276  ·            2  ·      37.89  │
·································|····················|·············|·············|·············|···············|··············
|  ERC721PresetContractURI       ·  mint              ·          -  ·          -  ·      90772  ·            1  ·      46.93  │
·································|····················|·············|·············|·············|···············|··············
|  ERC721PresetExchangable       ·  exchange          ·          -  ·          -  ·      47549  ·            1  ·      24.58  │
·································|····················|·············|·············|·············|···············|··············
|  ERC721PresetExchangable       ·  list              ·          -  ·          -  ·      48098  ·            1  ·      24.87  │
·································|····················|·············|·············|·············|···············|··············
|  ERC721PresetExchangable       ·  mint              ·          -  ·          -  ·      90794  ·            1  ·      46.94  │
·································|····················|·············|·············|·············|···············|··············
|  ERC721PresetExchangableFees   ·  exchange          ·          -  ·          -  ·      81168  ·            1  ·      41.97  │
·································|····················|·············|·············|·············|···············|··············
|  ERC721PresetExchangableFees   ·  list              ·          -  ·          -  ·      48098  ·            1  ·      24.87  │
·································|····················|·············|·············|·············|···············|··············
|  ERC721PresetExchangableFees   ·  mint              ·          -  ·          -  ·      90766  ·            1  ·      46.93  │
·································|····················|·············|·············|·············|···············|··············
|  ERC721PresetExchangableFees   ·  setFee            ·      78981  ·     113193  ·      96087  ·            2  ·      49.68  │
·································|····················|·············|·············|·············|···············|··············
|  ERC721PresetListable          ·  delist            ·          -  ·          -  ·      15427  ·            1  ·       7.98  │
·································|····················|·············|·············|·············|···············|··············
|  ERC721PresetListable          ·  list              ·          -  ·          -  ·      48062  ·            1  ·      24.85  │
·································|····················|·············|·············|·············|···············|··············
|  ERC721PresetListable          ·  mint              ·          -  ·          -  ·      90772  ·            1  ·      46.93  │
·································|····················|·············|·············|·············|···············|··············
|  ERC721PresetMaxQuantity       ·  mint              ·      75986  ·      93098  ·      84542  ·            2  ·      43.71  │
·································|····················|·············|·············|·············|···············|··············
|  ERC721PresetTransferFees      ·  removeFee         ·          -  ·          -  ·      26731  ·            1  ·      13.82  │
·································|····················|·············|·············|·············|···············|··············
|  ERC721PresetTransferFees      ·  setFee            ·      35179  ·     113159  ·      76564  ·            4  ·      39.59  │
·································|····················|·············|·············|·············|···············|··············
|  ERC721PresetVanilla           ·  mint              ·          -  ·          -  ·      90772  ·            1  ·      46.93  │
·································|····················|·············|·············|·············|···············|··············
|  ERC721PresetZeppelin          ·  burn              ·          -  ·          -  ·      27497  ·            1  ·      14.22  │
·································|····················|·············|·············|·············|···············|··············
|  ERC721PresetZeppelin          ·  mint              ·          -  ·          -  ·     159628  ·            1  ·      82.53  │
·································|····················|·············|·············|·············|···············|··············
|  Deployments                                        ·                                         ·  % of limit   ·             │
······················································|·············|·············|·············|···············|··············
|  ERC1155AirDrop                                     ·          -  ·          -  ·    2363021  ·         19 %  ·    1221.77  │
······················································|·············|·············|·············|···············|··············
|  ERC1155Exchange                                    ·          -  ·          -  ·    2303191  ·       18.5 %  ·    1190.83  │
······················································|·············|·············|·············|···············|··············
|  ERC1155PresetAirDrop                               ·          -  ·          -  ·    1519537  ·       12.2 %  ·     785.66  │
······················································|·············|·············|·············|···············|··············
|  ERC1155PresetExchangable                           ·          -  ·          -  ·    1825752  ·       14.7 %  ·     943.98  │
······················································|·············|·············|·············|···············|··············
|  ERC1155PresetExchangableFees                       ·          -  ·          -  ·    2303191  ·       18.5 %  ·    1190.83  │
······················································|·············|·············|·············|···············|··············
|  ERC1155PresetListable                              ·          -  ·          -  ·    1643573  ·       13.2 %  ·     849.79  │
······················································|·············|·············|·············|···············|··············
|  ERC1155PresetTransferFees                          ·          -  ·          -  ·    1838561  ·       14.8 %  ·     950.60  │
······················································|·············|·············|·············|···············|··············
|  ERC1155PresetVanilla                               ·          -  ·          -  ·    1440468  ·       11.6 %  ·     744.77  │
······················································|·············|·············|·············|···············|··············
|  ERC721AirDrop                                      ·    2180583  ·    2180595  ·    2180585  ·       17.5 %  ·    1127.44  │
······················································|·············|·············|·············|···············|··············
|  ERC721Exchange                                     ·          -  ·          -  ·    2118550  ·         17 %  ·    1095.37  │
······················································|·············|·············|·············|···············|··············
|  ERC721PreMint                                      ·          -  ·          -  ·    1997731  ·         16 %  ·    1032.90  │
······················································|·············|·············|·············|···············|··············
|  ERC721PresetAirDrop                                ·          -  ·          -  ·    1351147  ·       10.9 %  ·     698.59  │
······················································|·············|·············|·············|···············|··············
|  ERC721PresetContractURI                            ·          -  ·          -  ·    1310239  ·       10.5 %  ·     677.44  │
······················································|·············|·············|·············|···············|··············
|  ERC721PresetExchangable                            ·          -  ·          -  ·    1451515  ·       11.7 %  ·     750.49  │
······················································|·············|·············|·············|···············|··············
|  ERC721PresetExchangableFees                        ·          -  ·          -  ·    1850132  ·       14.9 %  ·     956.58  │
······················································|·············|·············|·············|···············|··············
|  ERC721PresetListable                               ·          -  ·          -  ·    1322831  ·       10.6 %  ·     683.95  │
······················································|·············|·············|·············|···············|··············
|  ERC721PresetMaxQuantity                            ·          -  ·          -  ·    1276236  ·       10.3 %  ·     659.86  │
······················································|·············|·············|·············|···············|··············
|  ERC721PresetPreMint                                ·          -  ·          -  ·    1224228  ·        9.8 %  ·     632.97  │
······················································|·············|·············|·············|···············|··············
|  ERC721PresetTransferFees                           ·          -  ·          -  ·    1527176  ·       12.3 %  ·     789.60  │
······················································|·············|·············|·············|···············|··············
|  ERC721PresetVanilla                                ·          -  ·          -  ·    1205766  ·        9.7 %  ·     623.42  │
······················································|·············|·············|·············|···············|··············
|  ERC721PresetZeppelin                               ·          -  ·          -  ·    1467272  ·       11.8 %  ·     758.63  │
·-----------------------------------------------------|-------------|-------------|-------------|---------------|-------------·
</pre>
